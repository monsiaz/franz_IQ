<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FranzIQ — Article</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/styles.css" />
    <style>
      .article-hero { background: linear-gradient(135deg, rgba(45,212,191,.12), rgba(14,165,233,.12)); }
      .hero-img { width:100%; max-height: 420px; object-fit: cover; border-radius: 16px; }
      .article-body { font-size: 1.05rem; line-height: 1.7; }
      .article-body h2 { margin-top: 2rem; font-weight: 800; }
      .article-body h3 { margin-top: 1.25rem; font-weight: 700; }
      .article-meta { color: var(--text-secondary); }
      .article-share a { text-decoration:none; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top">
      <div class="container">
        <a class="navbar-brand" href="../index.html">FranzIQ</a>
        <a class="btn btn-success btn-sm ms-auto" href="../index.html#quiz">Commencer le test</a>
      </div>
    </nav>

    <header class="article-hero py-4">
      <div class="container">
        <div class="row g-4 align-items-center">
          <div class="col-12 col-lg-6">
            <h1 id="title" class="display-6 fw-extrabold mb-2">Article</h1>
            <div class="article-meta mb-2"><span id="cat" class="badge bg-success-subtle text-success-emphasis me-2"></span><span id="date"></span></div>
            <p id="desc" class="lead mb-0"></p>
          </div>
          <div class="col-12 col-lg-6">
            <img id="hero" class="hero-img" alt="Image à la une" />
          </div>
        </div>
      </div>
    </header>

    <main class="py-4">
      <div class="container">
        <article class="article-body" id="content"></article>
        <hr class="my-4" />
        <div class="d-flex justify-content-between align-items-center">
          <div class="small article-meta">© <span id="year"></span> FranzIQ · Blog</div>
          <div class="article-share d-flex gap-3">
            <a id="tw" href="#" target="_blank">Partager X</a>
            <a id="ln" href="#" target="_blank">Partager LinkedIn</a>
          </div>
        </div>
      </div>
    </main>

    <script>
      const qs = new URLSearchParams(location.search);
      const file = qs.get('f');
      const indexUrl = './articles/index.json';

      (function init(){
        document.getElementById('year').textContent = new Date().getFullYear();
        if (!file) return;
        fetch(indexUrl).then(r=>r.json()).then(list=>{
          const meta = (list||[]).find(p=> p.file===file);
          if (meta){
            document.getElementById('title').textContent = meta.h1 || meta.title_seo || '';
            document.getElementById('cat').textContent = (meta.category||'').replace('-', ' ');
            document.getElementById('date').textContent = meta.date || '';
            document.getElementById('desc').textContent = meta.meta_description || '';
            const hero = document.getElementById('hero');
            hero.src = `./articles/${meta.featured_image}`;
            hero.onerror = () => hero.src = '../assets/hero-illustration.svg';
          }
        });
        fetch(`./articles/${file}`, { cache:'no-store' })
          .then(r=>r.text())
          .then(html=>{ document.getElementById('content').innerHTML = html; setShare(); })
          .catch(()=>{ document.getElementById('content').innerHTML = '<div class="text-muted">Article indisponible.</div>'; });
      })();

      function setShare(){
        const url = location.href;
        const text = encodeURIComponent(document.getElementById('title').textContent);
        document.getElementById('tw').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${text}`;
        document.getElementById('ln').href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
      }
    </script>
  </body>
  </html>


